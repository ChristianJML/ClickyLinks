<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClickyWords</title>
    <meta name="description" content="Burn boring CTAs. Write actions people want to take. An AI-powered tool that helps you craft clear, compelling calls-to-action that convert.">
    <style>
        html, body {
            height: 100%; /* Ensure html and body take full viewport height */
            margin: 0; /* Reset default margins */
            padding: 0; /* Reset default padding */
        }
        body {
            font-family: Arial, sans-serif;
            background-color: #E1E4E1; /* Updated background color */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: #261201; /* Updated text color */
        }
        .container {
            text-align: center;
            padding: 20px;
            max-width: 640px; /* Set max-width for the container */
            width: 640px; /* Ensure default width matches max-width */
            display: flex; /* Enable flexbox for vertical layout */
            flex-direction: column; /* Stack children vertically */
            gap: 16px; /* Add 16px gap between children, specifically for response boxes */
        }
        /* Responsive Wrapper for larger screens */
        .responsive-wrapper {
            display: flex;
            width: 100%;
            min-height: 100vh; /* Ensure wrapper takes full viewport height */
        }
        .main-content-area {
            background-image: radial-gradient(circle at center, #261201 2px, transparent 3px); /* Black circles */
            background-size: 20px 20px; /* Adjust size of the repeating pattern */
            display: none; /* Hidden by default */
        }
        @media (min-width: 768px) {
            .responsive-wrapper {
                flex-direction: row; /* Arrange items horizontally */
                justify-content: flex-start; /* Align to start */
                align-items: stretch; /* Stretch items to fill height */
            }
            .container {
                width: 33%; /* 33% width on large screens */
                max-width: none; /* Remove max-width constraint */
                padding: 20px; /* Keep padding */
                gap: 16px; /* Ensure gap for items within container */
                display: flex; /* Ensure container is a flex container */
                flex-direction: column; /* Stack children vertically */
            }
            .main-content-area {
                display: flex; /* Enable flexbox for centering */
                flex-direction: column; /* Stack response boxes vertically */
                justify-content: center; /* Center content vertically */
                align-items: center; /* Center content horizontally */
                width: 67%; /* 67% width on large screens */
                gap: 24px; /* Add gap between response boxes */
            }
            .response-box {
                max-width: 600px; /* Set max-width for response boxes */
                width: 80%; /* Set width for response boxes */
            }
            #addDetailsButton {
                display: block; /* Show the add details button on larger screens */
            }
            #detailModal {
                display: none; /* Hide the modal on larger screens */
            }
            header {
                text-align: left; /* Left align header text on larger screens */
            }
        }
        input[type="text"] {
            flex-grow: 1;
            padding: 10px;
            border: 2px solid #261201; /* Added border */
            border-radius: 5px;
            font-size: 1em;
            background-color: transparent; /* Transparent background */
            color: #261201;
            margin-right: 0;
        }
        input[type="text"]:focus {
            outline: none; /* Remove default outline */
            border-color: #36679b; /* Set border color on focus */
            border-width: 1px; /* Set border thickness on focus */
        }
        .input-buttons-container {
            display: flex;
            align-items: center; /* Vertically align items */
            margin-top: 24px; /* Space from header */
            justify-content: space-between; /* Distribute items evenly, pushing first to left, last to right */
            gap: 8px; /* Add 8px gap between elements */
            width: 100%; /* Take full width of the container */
        }
        button {
            padding: 10px 15px;
            border: 2px solid #ED8008; /* Added 2px border */
            border-radius: 5px;
            background-color: #ED8008; /* Updated button background color */
            color: #261201; /* Updated button text color */
            cursor: pointer;
            font-size: 1em;
        }
        button:hover {
            background-color: #d67307; /* Slightly darker on hover */
        }
        #addDetailsButton {
            background-color: transparent;
            color: #261201;
            border: 2px solid #ED8008; /* Updated border to 2px */
        }
        #addDetailsButton:hover {
            background-color: rgba(237, 128, 8, 0.1); /* Slight background on hover */
        }
        .response-box {
            background-color: #E1E4E1; /* Updated background color */
            border: 2px solid #261201; /* Added border */
            padding: 20px;
            border-radius: 8px;
            text-align: left; /* Left align text within response boxes */
            opacity: 0;
            visibility: hidden;
            max-height: 0; /* Initially collapsed */
            overflow: hidden; /* Hide overflowing content */
            transition: opacity 0.25s ease-in-out, visibility 0.25s ease-in-out, max-height 0.5s ease-in-out; /* Add max-height to transition */
        }
        .inner-box {
            display: flex;
            flex-direction: column;
        }
        .loader {
            font-size: 1em; /* 16px */
            opacity: 1; /* Visible initially */
            transition: opacity 0.5s ease-in-out; /* Fade out effect */
        }
        .result {
            opacity: 0; /* Hidden initially */
            visibility: hidden; /* Hidden initially */
            transition: opacity 0.5s ease-in-out; /* Fade in effect */
        }
        .response-box h2 {
            margin-top: 0; /* Remove top margin from H2 inside response-box */
            margin-bottom: 0; /* Ensure no bottom margin on H2 */
        }
        .response-box h2 {
            margin-bottom: 0; /* Ensure no bottom margin on H2 */
        }
        div[id$="PrimaryContent"] {
            margin-top: 10px; /* Add top margin to the primary content div */
        }
        .response-box p {
            margin-bottom: 0; /* Remove bottom margin from P inside response-box */
        }
        .new-cta {
            font-size: 1em; /* 16px */
            opacity: 0; /* Initial opacity for fade-in */
            transition: opacity 0.5s ease-in-out; /* Transition for fade-in */
        }
        .new-cta-list li {
            font-size: 1em; /* 16px */
            opacity: 0; /* Initial opacity for fade-in */
            transition: opacity 0.5s ease-in-out; /* Transition for fade-in */
        }
        .why-it-works {
            font-size: 0.875em; /* 14px */
            margin-top: 10px; /* Add some space above the explanation */
            opacity: 0; /* Initial opacity for fade-in */
            transition: opacity 0.5s ease-in-out; /* Transition for fade-in */
        }
        h1 {
            font-size: 3em;
            margin-bottom: 0; /* Removed margin-bottom */
        }
        p {
            font-size: 1.2em;
            margin-bottom: 0; /* Remove bottom margin from general p elements */
        }
        .slogan {
            margin-top: 0; /* Ensure no top margin on the slogan */
        }
        /* Modal Styles */
        .modal {
            display: none; /* Hidden by default, JavaScript will set to flex when opened */
            align-items: center; /* Center content vertically */
            justify-content: center; /* Center content horizontally */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Re-added overflow: auto; to allow scrolling of the entire modal */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
            padding: 24px 0; /* Add top and bottom padding to the modal overlay itself */
        }
        #extraDetailsSection {
            display: none; /* Hidden by default for mobile */
            flex-direction: column; /* Stack children vertically */
            gap: 16px; /* Consistent vertical spacing */
            padding: 20px; /* Add some padding for visual separation if needed */
        }
        #ctaEssayModal.modal {
            /* Specific styles for the CTA essay modal container - rely on default .modal centering */
        }
        .modal-content {
            background-color: #E1E4E1; /* Updated background color */
            border: 2px solid #261201; /* Added border */
            padding: 20px;
            border-radius: 8px;
            position: relative;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            max-width: 500px;
            max-height: 100%; /* Fill 100% of the available height within the padded parent */
            overflow-y: auto;
            margin: auto; /* Auto margin for horizontal centering within the padded modal */
            box-sizing: border-box; /* Include padding and border in the element's total width and height */
        }
        #ctaEssayModal .modal-content {
            max-width: 800px;
            max-height: 90%; /* Updated max-height for CTA essay modal to 90% */
            background-color: #E1E4E1; /* Updated background color */
            border: 2px solid #261201; /* Added border */
            margin: auto; /* Centered within the padded modal */
            box-sizing: border-box; /* Ensure consistent box model */
        }
        #detailModal .modal-content { /* Specific styles for Add Extra Detail modal content */
            margin: 0 24px 0 auto; /* Top:0, Right:24px, Bottom:0, Left:auto (pushes to right) */
            max-height: 100%; /* Fill 100% of the available height within the padded parent */
            box-sizing: border-box; /* Ensure consistent box model */
        }
        /* New styles for the Add Extra Detail modal itself */
        #detailModal.modal {
            padding-top: 24px; /* Add top padding to the modal container */
            padding-bottom: 24px; /* Add bottom padding to the modal container */
            align-items: flex-start; /* Align content to the start (top) to respect margins */
            justify-content: flex-end; /* Push content to the right */
            margin: 0; /* Ensure no margin on the modal container itself */
            box-sizing: border-box; /* Ensure consistent box model */
        }
        .close-button {
            color: #261201; /* Updated close button color */
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close-button:hover,
        .close-button:focus {
            color: white;
            text-decoration: none;
            cursor: pointer;
        }
        .control-group {
            margin-bottom: 16px; /* Consistent vertical spacing between control groups */
        }
        .control-group label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
            font-size: 1.1em;
        }
        .control-group h4 {
            margin-bottom: 10px;
        }
        input[type="range"] {
            width: 100%;
            margin-top: 5px;
            accent-color: #3b4b59; /* Updated slider color */
        }
        /* Styles for the custom switch */
        .switch-container {
            display: flex;
            align-items: center;
            gap: 10px; /* Add some space between the text and the switch */
            margin-bottom: 5px;
            font-size: 1.1em;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 20px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            -webkit-transition: .4s;
            transition: .4s;
            border-radius: 20px; /* Rounded slider */
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #3b4b59;
        }
        input:focus + .slider {
            box-shadow: 0 0 1px #3b4b59;
        }
        input:checked + .slider:before {
            -webkit-transform: translateX(20px);
            -ms-transform: translateX(20px);
            transform: translateX(20px);
        }
        .response-box ul,
        .response-box p {
            font-size: 0.875em; /* Ensure consistent font size, updated to 14px */
            margin-bottom: 0; /* Remove bottom margin */
        }
        .response-box ul li {
            font-size: 1em; /* Keep list item font size at 16px / 1em */
        }
        .response-box ul li:last-child {
            margin-bottom: 0; /* Remove bottom margin from the last list item */
        }
        .model-name {
            font-size: 16px;
            font-weight: 400; /* Set font-weight to 400 */
        }
        .response-box ul {
            list-style-type: none;
            padding: 0;
            font-size: 1em; /* Set font size of ul to 1em */
        }
        .new-cta-list {
            opacity: 0; /* Initial opacity for fade-in */
            transition: opacity 0.5s ease-in-out; /* Transition for fade-in */
        }
        .response-box li {
            margin-bottom: 10px;
        }
        .response-box li a {
            display: inline;
            color: #36679b; /* Updated link color */
            text-decoration: underline;
        }
        .response-box li a:hover {
            color: #0056b3; /* Keep a hover color, could also update to a shade of #36679b if desired */
        }
        a {
            color: #36679b; /* Updated all link color */
            text-decoration: underline;
        }
        /* Added for the 'Add extra detail' modal close button */
        .detail-close-button {
            color: #261201; /* Updated close button color */
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .detail-close-button:hover,
        .detail-close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="responsive-wrapper">
        <div class="container">
            <header style="display: flex; flex-direction: column; gap: 16px;">
                <h1>ClickyWords</h1>
                <p class="slogan">Write actions people want to take. <a href="#" id="learnWhyLink">Learn why</a></p>
            </header>
            <div class="input-buttons-container">
                <input type="text" id="mainInput" value="" autofocus>
                <button id="submitButton">Fix my link</button>
                <button id="addDetailsButton" class="modal-button">Add extra detail</button>
            </div>
        </div>
        <div class="main-content-area">
            <div class="response-box" id="chatGPTResponseBox">
                <h2>ChatGPT <span class="model-name">(gpt-4)</span></h2>
                <div class="inner-box">
                    <p class="loader">Thinking...</p>
                    <div class="result">
                        <div id="chatGPTPrimaryContent"></div>
                        <p class="why-it-works" id="chatGPTExplanationText"></p>
                    </div>
                </div>
            </div>
            <div class="response-box" id="claudeResponseBox">
                <h2>Claude <span class="model-name">(sonnet-4)</span></h2>
                <div class="inner-box">
                    <p class="loader">Thinking...</p>
                    <div class="result">
                        <div id="claudePrimaryContent"></div>
                        <p class="why-it-works" id="claudeExplanationText"></p>
                    </div>
                </div>
            </div>
            <div class="response-box" id="geminiResponseBox">
                <h2>Gemini <span class="model-name">(1.5-flash)</span></h2>
                <div class="inner-box">
                    <p class="loader">Thinking...</p>
                    <div class="result">
                        <div id="geminiPrimaryContent"></div>
                        <p class="why-it-works" id="geminiExplanationText"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="detailModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h3>Add extra detail</h3>
            <div class="control-group">
                <label for="numSuggestions">Number of Suggestions: <span id="numSuggestionsValue">1</span></label>
                <input type="range" id="numSuggestions" min="1" max="3" value="1">
            </div>
            <div class="control-group">
                
                <label for="playfulProfessional"><span>Playful</span><span>Professional</span></label>
                <input type="range" id="playfulProfessional" min="-5" max="5" value="-1">
            </div>
            <div class="control-group">
                <label for="length"><span>Short & Punchy</span><span>Long & Descriptive</span></label>
                <input type="range" id="length" min="-5" max="5" value="-5">
            </div>
            <div class="control-group">
                <div class="switch-container">
                    <label for="includeExplanation">Include explanations</label>
                    <label class="switch">
                        <input type="checkbox" id="includeExplanation" checked>
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
            <div class="control-group">
                <label for="whatCompanyDoes">What the company does:</label>
                <input type="text" id="whatCompanyDoes" style="width: 100%; margin-top: 5px; box-sizing: border-box;" >
            </div>
            <div class="control-group">
                <label for="targetAudience">Target audience</label>
                <input type="text" id="targetAudience" style="width: 100%; margin-top: 5px; box-sizing: border-box;" >
            </div>
            <div class="control-group">
                <label for="banWords">Ban words (comma-separated):</label>
                <input type="text" id="banWords" style="width: 100%; margin-top: 5px; box-sizing: border-box;" >
            </div>
            <div class="control-group">
                <label for="keepWords">Keep words (comma-separated):</label>
                <input type="text" id="keepWords" style="width: 100%; margin-top: 5px; box-sizing: border-box;" >
            </div>
            <button id="applyDetailsButton">Apply</button>
        </div>
    </div>

    <div id="ctaEssayModal" class="modal">
        <div class="modal-content">
            <span class="close-button cta-essay-close">&times;</span>
            <article class="cta-essay" lang="en">
                <header>
                    <h2>'Click Here' as a Call to Action: Effective or Not?</h2>
                    <p><em>A short research essay by ChatGPT</em></p>
                </header>

                <section>
                    <p>
                    Across website types (e-commerce, SaaS, nonprofit, content), “click here” is generally a poor call to action (CTA).
                    It underperforms more specific alternatives on conversion, fails accessibility best practices, weakens SEO signals,
                    and degrades overall UX.
                    </p>
                </section>

                <section>
                    <h3>Conversion (CRO)</h3>
                    <p>
                    Effective CTAs communicate the action <strong>and</strong> the value: “Add to cart,” “Start free trial,”
                    “Download the report.” Generic commands like “click here” don’t tell users what happens next or why it matters,
                    which reduces motivation. See Nielsen Norman Group on meaningful link labels:
                    <a href="https://www.nngroup.com/articles/better-link-labels/" rel="noopener">Better Link Labels</a>.
                    </p>
                </section>

                <section>
                    <h3>Accessibility</h3>
                    <p>
                    Screen-reader and keyboard users often navigate by reading a list of links out of context. Repeated “click here”
                    provides no clue about destination or purpose. Accessibility standards require (and guidance strongly recommends)
                    descriptive link text:
                    <a href="https://www.w3.org/WAI/WCAG21/Understanding/link-purpose-in-context.html" rel="noopener">WCAG 2.4.4</a>,
                    <a href="https://www.w3.org/WAI/WCAG21/Understanding/link-purpose-link-only.html" rel="noopener">WCAG 2.4.9</a>,
                    <a href="https://www.section508.gov/blog/accessibility-bytes/descriptive-links-and-hypertext/" rel="noopener">Section 508 blog</a>,
                    <a href="https://www.section508.gov/develop/guide-accessible-web-design-development/" rel="noopener">Section 508 guide</a>,
                    and
                    <a href="https://www.gov.uk/guidance/content-design/links" rel="noopener">GOV.UK Content Design</a>.
                    </p>
                </section>

                <section>
                    <h3>SEO</h3>
                    <p>
                    Search engines use anchor text to understand a page’s topic. Google lists “Click here” and “Read more”
                    as <em>bad (too generic)</em> examples and recommends concise, descriptive anchors:
                    <a href="https://developers.google.com/search/docs/crawling-indexing/links-crawlable" rel="noopener">Google Search Central: Write good anchor text</a>.
                    SEO guidance concurs: avoid generic anchors and tell users what the link is about
                    (<a href="https://yoast.com/what-is-anchor-text/" rel="noopener">Yoast</a>).
                    </p>
                </section>

                <section>
                    <h3>User Experience (UX)</h3>
                    <p>
                    Labels need “information scent”—a clear cue about the outcome. “Click here” forces readers to hunt for context,
                    slowing scanning and eroding trust. See
                    <a href="https://www.nngroup.com/articles/learn-more-links/" rel="noopener">NN/g: “Learn more” is the new “Click here”</a>
                    and
                    <a href="https://www.nngroup.com/articles/better-link-labels/" rel="noopener">NN/g: Better Link Labels</a>.
                    </p>
                </section>

                <section>
                    <h3>What to Use Instead</h3>
                    <ul>
                    <li><strong>E-commerce:</strong> “Add to cart,” “Buy now,” “Shop new arrivals.”</li>
                    <li><strong>SaaS:</strong> “Start free trial,” “Get started,” “Request a demo.”</li>
                    <li><strong>Content/Education:</strong> “Read the full article: [Title],” “Download the 2025 report.”</li>
                    <li><strong>Nonprofit/Public sector:</strong> “Donate now,” “Join our newsletter,” “View eligibility criteria.”</li>
                    </ul>
                    <p>The principle: make the action and destination unmistakable to improve inclusivity, SEO, and conversions.</p>
                </section>

                <footer>
                    <h3>Key Sources</h3>
                    <ul>
                    <li><a href="https://www.w3.org/WAI/WCAG21/Understanding/link-purpose-in-context.html" rel="noopener">WCAG 2.4.4</a></li>
                    <li><a href="https://www.w3.org/WAI/WCAG21/Understanding/link-purpose-link-only.html" rel="noopener">WCAG 2.4.9</a></li>
                    <li><a href="https://www.section508.gov/blog/accessibility-bytes/descriptive-links-and-hypertext/" rel="noopener">Section 508: Descriptive links</a></li>
                    <li><a href="https://www.section508.gov/develop/guide-accessible-web-design-development/" rel="noopener">Section 508: Accessible design guide</a></li>
                    <li><a href="https://developers.google.com/search/docs/crawling-indexing/links-crawlable" rel="noopener">Google Search Central: Anchor text</a></li>
                    <li><a href="https://www.nngroup.com/articles/learn-more-links/" rel="noopener">NN/g: Learn More links</a></li>
                    <li><a href="https://www.nngroup.com/articles/better-link-labels/" rel="noopener">NN/g: Better link labels</a></li>
                    <li><a href="https://www.gov.uk/guidance/content-design/links" rel="noopener">GOV.UK Content Design: Links</a></li>
                    <li><a href="https://yoast.com/what-is-anchor-text/" rel="noopener">Yoast: Anchor text</a></li>
                    </ul>
                </footer>
            </article>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const textInput = document.getElementById('mainInput'); // Changed from textInput
            const submitButton = document.getElementById('submitButton');
            const addDetailsButton = document.getElementById('addDetailsButton');
            const chatGPTPrimaryContent = document.getElementById('chatGPTPrimaryContent');
            const chatGPTExplanationText = document.getElementById('chatGPTExplanationText');
            const claudePrimaryContent = document.getElementById('claudePrimaryContent');
            const claudeExplanationText = document.getElementById('claudeExplanationText');
            const geminiPrimaryContent = document.getElementById('geminiPrimaryContent');
            const geminiExplanationText = document.getElementById('geminiExplanationText');
            const detailModal = document.getElementById('detailModal');
            const closeButton = detailModal.querySelector('.close-button');
            const applyDetailsButton = document.getElementById('applyDetailsButton');

            const numSuggestionsSlider = document.getElementById('numSuggestions');
            const numSuggestionsValue = document.getElementById('numSuggestionsValue');
            const playfulProfessionalSlider = document.getElementById('playfulProfessional');
            
            const lengthSlider = document.getElementById('length');
            const includeExplanationCheckbox = document.getElementById('includeExplanation');

            
            const whatCompanyDoesTextarea = document.getElementById('whatCompanyDoes');
            const targetAudienceInput = document.getElementById('targetAudience');

            const banWordsInput = document.getElementById('banWords');
            const keepWordsInput = document.getElementById('keepWords');

            // Update slider value displays
            numSuggestionsSlider.oninput = () => { numSuggestionsValue.textContent = numSuggestionsSlider.value; };

            // Open the modal
            addDetailsButton.addEventListener('click', () => {
                detailModal.style.display = 'flex'; // Use flex to center the modal
            });

            // Close the modal
            closeButton.addEventListener('click', () => {
                detailModal.style.display = 'none';
            });

            // Close the modal if clicked outside
            window.addEventListener('click', (event) => {
                if (event.target == detailModal) {
                    detailModal.style.display = 'none';
                }
            });

            applyDetailsButton.addEventListener('click', () => {
                // Here you would capture the values and pass them to your main logic
                detailModal.style.display = 'none'; // Close modal after applying
            });

            document.getElementById('mainInput').addEventListener('keydown', (event) => {
                if (event.key === 'Enter') {
                    document.getElementById('submitButton').click();
                }
            });

            document.getElementById('submitButton').addEventListener('click', async () => {
                const textInput = document.getElementById('mainInput').value; // Changed from textInput
                const chatGPTPrimaryContent = document.getElementById('chatGPTPrimaryContent');
                const chatGPTExplanationText = document.getElementById('chatGPTExplanationText');
                const claudePrimaryContent = document.getElementById('claudePrimaryContent');
                const claudeExplanationText = document.getElementById('claudeExplanationText');
                const geminiPrimaryContent = document.getElementById('geminiPrimaryContent');
                const geminiExplanationText = document.getElementById('geminiExplanationText');

                // Make response boxes visible immediately
                document.getElementById('chatGPTResponseBox').style.opacity = '1';
                document.getElementById('chatGPTResponseBox').style.visibility = 'visible';
                document.getElementById('claudeResponseBox').style.opacity = '1';
                document.getElementById('claudeResponseBox').style.visibility = 'visible';
                document.getElementById('geminiResponseBox').style.opacity = '1';
                document.getElementById('geminiResponseBox').style.visibility = 'visible';
                
                // Set initial max-height for boxes to show loader with padding
                document.getElementById('chatGPTResponseBox').style.maxHeight = '100px'; // Temporary height for loader
                document.getElementById('claudeResponseBox').style.maxHeight = '100px'; // Temporary height for loader
                document.getElementById('geminiResponseBox').style.maxHeight = '100px'; // Temporary height for loader

                // Trigger scale-in animation for boxes
                // document.getElementById('chatGPTResponseBox').style.transform = 'scale(1)'; // Removed as per edit hint
                // document.getElementById('claudeResponseBox').style.transform = 'scale(1)'; // Removed as per edit hint
                // document.getElementById('geminiResponseBox').style.transform = 'scale(1)'; // Removed as per edit hint

                // Clear previous content from PrimaryContent, as loader now handles 'Thinking...'
                chatGPTPrimaryContent.innerHTML = ''; 
                chatGPTExplanationText.textContent = ''; // Clear previous explanation
                claudePrimaryContent.innerHTML = '';
                claudeExplanationText.textContent = ''; // Clear previous explanation
                geminiPrimaryContent.innerHTML = '';
                geminiExplanationText.textContent = ''; // Clear previous explanation

                // Show loader and hide result initially
                document.getElementById('chatGPTResponseBox').querySelector('.loader').style.opacity = '1';
                document.getElementById('chatGPTResponseBox').querySelector('.result').style.opacity = '0';
                document.getElementById('chatGPTResponseBox').querySelector('.result').style.visibility = 'hidden';
                document.getElementById('claudeResponseBox').querySelector('.loader').style.opacity = '1';
                document.getElementById('claudeResponseBox').querySelector('.result').style.opacity = '0';
                document.getElementById('claudeResponseBox').querySelector('.result').style.visibility = 'hidden';
                document.getElementById('geminiResponseBox').querySelector('.loader').style.opacity = '1';
                document.getElementById('geminiResponseBox').querySelector('.result').style.opacity = '0';
                document.getElementById('geminiResponseBox').querySelector('.result').style.visibility = 'hidden';

                const requestBody = {
                    message: textInput,
                    numSuggestions: numSuggestionsSlider.value,
                    playfulProfessional: playfulProfessionalSlider.value,
                    length: lengthSlider.value,
                    includeExplanation: includeExplanationCheckbox.checked,
                    
                    whatCompanyDoes: whatCompanyDoesTextarea.value,
                    targetAudience: targetAudienceInput.value,
                    banWords: banWordsInput.value,
                    keepWords: keepWordsInput.value,
                };

                try {
                    // Fetch from ChatGPT API
                    const chatGPTResponse = await fetch('/chat', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(requestBody)
                    });

                    const chatGPTData = await chatGPTResponse.json();

                    if (chatGPTResponse.ok) {
                        chatGPTPrimaryContent.innerHTML = ''; // Clear previous responses
                        // Hide loader and show result
                        const chatGPTLoader = document.getElementById('chatGPTResponseBox').querySelector('.loader');
                        chatGPTLoader.style.opacity = '0';
                        chatGPTLoader.addEventListener('transitionend', function handler() {
                            chatGPTLoader.style.display = 'none';
                            chatGPTLoader.removeEventListener('transitionend', handler);
                        });
                        document.getElementById('chatGPTResponseBox').querySelector('.result').style.opacity = '1';
                        document.getElementById('chatGPTResponseBox').querySelector('.result').style.visibility = 'visible';

                        if (chatGPTData.response && Array.isArray(chatGPTData.response)) {
                            const ul = document.createElement('ul');
                            ul.classList.add('new-cta-list'); // Add class to ul
                            chatGPTData.response.forEach(suggestion => {
                                const li = document.createElement('li');
                                li.innerHTML = suggestion;
                                ul.appendChild(li);
                            });
                            chatGPTPrimaryContent.appendChild(ul);
                        } else {
                            const p = document.createElement('p');
                            p.classList.add('new-cta'); // Add class to p
                            p.innerHTML = chatGPTData.response;
                            chatGPTPrimaryContent.appendChild(p);
                        }
                        if (chatGPTData.explanation) {
                            chatGPTExplanationText.textContent = chatGPTData.explanation;
                        }
                        // Set max-height to allow expansion
                        document.getElementById('chatGPTResponseBox').style.maxHeight = '1000px'; // Adjust as needed

                        // Trigger fade-in for text
                        setTimeout(() => {
                            const newCtaElement = chatGPTPrimaryContent.querySelector('.new-cta') || chatGPTPrimaryContent.querySelector('.new-cta-list');
                            if (newCtaElement) {
                                newCtaElement.style.opacity = '1';
                                if (newCtaElement.classList.contains('new-cta-list')) {
                                    Array.from(newCtaElement.children).forEach(li => {
                                        li.style.opacity = '1';
                                    });
                                }
                            }
                            chatGPTExplanationText.style.opacity = '1';
                        }, 500); // Increased delay to allow box expansion to complete
                    } else {
                        chatGPTPrimaryContent.innerHTML = 'Error: ' + (chatGPTData.error || 'Something went wrong with ChatGPT.');
                    }
                } catch (error) {
                    chatGPTPrimaryContent.innerHTML = 'Network Error (ChatGPT): ' + error.message;
                }

                try {
                    // Fetch from Claude API
                    const claudeResponse = await fetch('/claude-chat', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(requestBody)
                    });

                    const claudeData = await claudeResponse.json();

                    if (claudeResponse.ok) {
                        claudePrimaryContent.innerHTML = ''; // Clear previous responses
                        // Hide loader and show result
                        const claudeLoader = document.getElementById('claudeResponseBox').querySelector('.loader');
                        claudeLoader.style.opacity = '0';
                        claudeLoader.addEventListener('transitionend', function handler() {
                            claudeLoader.style.display = 'none';
                            claudeLoader.removeEventListener('transitionend', handler);
                        });
                        document.getElementById('claudeResponseBox').querySelector('.result').style.opacity = '1';
                        document.getElementById('claudeResponseBox').querySelector('.result').style.visibility = 'visible';

                        if (claudeData.response && Array.isArray(claudeData.response)) {
                            const ul = document.createElement('ul');
                            ul.classList.add('new-cta-list'); // Add class to ul
                            claudeData.response.forEach(suggestion => {
                                const li = document.createElement('li');
                                li.innerHTML = suggestion;
                                ul.appendChild(li);
                            });
                            claudePrimaryContent.appendChild(ul);
                        } else {
                            const p = document.createElement('p');
                            p.classList.add('new-cta'); // Add class to p
                            p.innerHTML = claudeData.response;
                            claudePrimaryContent.appendChild(p);
                        }
                        if (claudeData.explanation) {
                            claudeExplanationText.textContent = claudeData.explanation;
                        }
                        // Set max-height to allow expansion
                        document.getElementById('claudeResponseBox').style.maxHeight = '1000px'; // Adjust as needed

                        // Trigger fade-in for text
                        setTimeout(() => {
                            const newCtaElement = claudePrimaryContent.querySelector('.new-cta') || claudePrimaryContent.querySelector('.new-cta-list');
                            if (newCtaElement) {
                                newCtaElement.style.opacity = '1';
                                if (newCtaElement.classList.contains('new-cta-list')) {
                                    Array.from(newCtaElement.children).forEach(li => {
                                        li.style.opacity = '1';
                                    });
                                }
                            }
                            claudeExplanationText.style.opacity = '1';
                        }, 500); // Increased delay to allow box expansion to complete
                    } else {
                        claudePrimaryContent.innerHTML = 'Error: ' + (claudeData.error || 'Something went wrong with Claude.');
                    }
                } catch (error) {
                    claudePrimaryContent.innerHTML = 'Network Error (Claude): ' + error.message;
                }

                try {
                    // Fetch from Gemini API
                    const geminiResponse = await fetch('/gemini-chat', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(requestBody)
                    });

                    const geminiData = await geminiResponse.json();

                    if (geminiResponse.ok) {
                        geminiPrimaryContent.innerHTML = ''; // Clear previous responses
                        // Hide loader and show result
                        const geminiLoader = document.getElementById('geminiResponseBox').querySelector('.loader');
                        geminiLoader.style.opacity = '0';
                        geminiLoader.addEventListener('transitionend', function handler() {
                            geminiLoader.style.display = 'none';
                            geminiLoader.removeEventListener('transitionend', handler);
                        });
                        document.getElementById('geminiResponseBox').querySelector('.result').style.opacity = '1';
                        document.getElementById('geminiResponseBox').querySelector('.result').style.visibility = 'visible';

                        if (geminiData.response && Array.isArray(geminiData.response)) {
                            const ul = document.createElement('ul');
                            ul.classList.add('new-cta-list'); // Add class to ul
                            geminiData.response.forEach(suggestion => {
                                const li = document.createElement('li');
                                li.innerHTML = suggestion;
                                ul.appendChild(li);
                            });
                            geminiPrimaryContent.appendChild(ul);
                        } else {
                            const p = document.createElement('p');
                            p.classList.add('new-cta'); // Add class to p
                            p.innerHTML = geminiData.response;
                            geminiPrimaryContent.appendChild(p);
                        }
                        if (geminiData.explanation) {
                            geminiExplanationText.textContent = geminiData.explanation;
                        }
                        // Set max-height to allow expansion
                        document.getElementById('geminiResponseBox').style.maxHeight = '1000px'; // Adjust as needed

                        // Trigger fade-in for text
                        setTimeout(() => {
                            const newCtaElement = geminiPrimaryContent.querySelector('.new-cta') || geminiPrimaryContent.querySelector('.new-cta-list');
                            if (newCtaElement) {
                                newCtaElement.style.opacity = '1';
                                if (newCtaElement.classList.contains('new-cta-list')) {
                                    Array.from(newCtaElement.children).forEach(li => {
                                        li.style.opacity = '1';
                                    });
                                }
                            }
                            geminiExplanationText.style.opacity = '1';
                        }, 500); // Increased delay to allow box expansion to complete
                    } else {
                        geminiPrimaryContent.innerHTML = 'Error: ' + (geminiData.error || 'Something went wrong with Gemini.');
                    }
                } catch (error) {
                    geminiPrimaryContent.innerHTML = 'Network Error (Gemini): ' + error.message;
                }
            });
            const learnWhyLink = document.getElementById('learnWhyLink');
            if (learnWhyLink) {
                learnWhyLink.addEventListener('click', (event) => {
                    event.preventDefault(); // Prevent default link behavior
                    document.getElementById('ctaEssayModal').style.display = 'flex'; // Use flex to center the modal
                });
            }

            const ctaEssayModal = document.getElementById('ctaEssayModal');
            const ctaEssayCloseButton = ctaEssayModal.querySelector('.cta-essay-close');
            if (ctaEssayCloseButton) {
                ctaEssayCloseButton.addEventListener('click', (event) => {
                    event.stopPropagation(); // Prevent click from bubbling up to window
                    ctaEssayModal.style.display = 'none';
                });
            }

            // Close the modal if clicked outside
            window.addEventListener('click', (event) => {
                if (event.target == ctaEssayModal) {
                    ctaEssayModal.style.display = 'none';
                }
            });
        }); // End DOMContentLoaded
    </script>
</body>
</html>
